---
title: "[HTTP]웹개발을 위한 기본지식"

toc: true
toc_sticky: true

categories:
  - HTTP
tags:
  - network
  - http
last_modified_at: 2023-11-09T15:30:00



---

# HTTP

> 이 게시글은 웹개발에 앞서 필요한 지식인 HTTP에 관해 다룬다

## RESTful API

``` http
/read-member-list			// 회원목록 조회
/read-member-by-id		// 회원 조회
/create-member				// 회원 등록
/update-member				// 회원 수정
/delete-member				// 회원 삭제
```

웹개발 시에 URI설계를 어떻게 할지는 중요한 문제이다. 명확하게 정해진 규칙이 없다면 위와 같이 CRUD기능을 수행하는 각 URI가 뒤죽박죽 되기 때문이다. 그래서 등장한 것이 RESTful한 API 설계방식이다. 여기서 중요한 것이 **<u>리소스와 행위를 분리</u>**하는 것이다. 예를 들어 여기서 리소스는 회원을 의미하고, 행위는 CRUD의 동작을 의미한다

``` http
/members				// 회원목록 조회
/members/{id}		// 회원 조회
/members				// 회원 등록
/members/{id}		// 회원 수정
/members/{id}		// 회원 삭제
```

문제는 RESTful API설계를 하게 되면 위와 같이 동일한 URI들이 존재하게 된다는 점이다. 이를 구분해주기 위해 HTTP method를 이용한다

RESTful API에서 대표적인 HTTP method는 아래와 같은 의미를 가진다. 아래는 대표적인 method이고 이외에도 다양한 method가 존재한다

- GET
  리소스 조회
- POST
  요청 data 처리
- PUT
  리소스 수정
- PATCH
  리소스 부분변경
- DELETE
  리소스 삭제

### 1. GET

- 리소스 조회
- client가 GET방식으로 요청을 보내면 server는 해당되는 data를 body에 담아 응답하는 방식
- server에 전달하고 싶은 data가 있다면 쿼리 파라미터를 이용
- POST방식처럼 msg body를 통해 data를 전달할 수 있지만 지원하지 않는 경우가 대다수
- 응답결과 리소스를 캐시하여 사용가능

### 2. POST

- 요청 data 처리
- client는 msg의 body를 통해서 server로 요청 data를 전달
- server는 msg의 body를 통해서 들어온 data를 처리하는 모든 기능을 수행
- 주로 **<u>새로운 리소스를 등록</u>**하거나 **<u>프로세스의 상태를 변경</u>**해야할때 사용
- 어떤 method를 써야할지 애매할 경우에 사용

### 3. PUT

- 리소스가 존재하면 완전히 대체(보내준 data로 모두 덮어씀)하고 없을 경우 새로 생성
- POST와 달리 `/members/{id}`처럼 리소스 위치를 알고 URI를 지정

### 4. PATCH

- 리소스 부분변경
- POST와 다르게 완전히 대체하는 것이 아니므로 특정 필드의 값만 수정가능

### 5. DELETE

- 리소스 삭제



## Data 전송방식

### 1. HTML Form data전송

- POST 전송
  - Content-Type은 application/x-www-form-urlencoded로 설정
  - form의 내용을 msg body를 통해서 전송('key=value'형식)
  - 전송되는 data를 url encoding 처리
- Content-Type이 Multipart인 경우
  - HTML form의 여러 필드값들을 구분하여 전송

### 2. API data 전송(AJAX 통신)

- client에서 server로 바로 data를 전송하는 경우
- Content-Type은 application/json으로 설정하는 것이 표준



## POST, PUT을 이용한 신규 자원 등록

### 1. POST

- client가 URL형태로만 요청해도 server에서 명확한 리소스에 해당하는 URI를 응답
- 예를 들어, `/members`의 형태로만 요청해도 server가 `/members/{id}`의 형태로 반환해줌
- 여기서 `/members`를 Collection이라고 부름

### 2. PUT

- client가 직접 리소스의 URI를 지정하여 server에 요청 즉, client가 리소스의 URI를 알고 있어야함
- 예를 들어, client가 `/files/{filename}`의 형태로 직접 server에 요청해야함
- 여기서 `/files`를 Store라고 부름

=> **<u>대부분 POST 기반의 신규자원 등록을 사용한다!!!</u>**



## HTML Form 사용시

- HTML Form은 GET과 POST 방식만 지원
- PUT, PATCH, DELETE 방식을 사용못한다는 제약이 있어서 컨트롤 URI라는 것을 사용
  - POST 방식에서 `/new`, `/edit`, `/delete` 등 동사를 등 동사를 붙이는 것이 컨트롤 URI
  - 실제로 현업에서 HTTP Method만으로 해결하기 어려울때 자주 사용



## HTTP 상태코드

> client의 요청에 대한 처리상태를 server가 응답으로 알려주는 기능으로 아래 5가지의 상태로 구분된다

- 1xx: 요청이 수신되어 처리중(거의 사용X)
- 2xx: 정상적인 요청 처리
- 3xx: 요청을 완료하기 위해 추가적인 행동 필요
- 4xx: client 오류로 server가 요청 수행불가
- 5xx: server 오류

상세코드가 정확히 무슨 뜻을 의미하는지 모를 경우 첫번째 자리 숫자만 확인하여 위 5가지로 나눠 대략적인 의미를 파악할 수 있다. 아래에서는 각 상태별로 상세코드를 알아보고자 한다



### 2XX

- 200 OK
  * 요청 성공한 경우
- 201 Created
  * 요청이 성공하여 새로운 리소스가 생성된 경우
  * 생성된 리소스는 응답 Header의 Location 필드로 확인가능
- 202 Accepted
  * 요청이 접수되었지만 처리가 완료되지 않은 경우
- 204 No Content
  - server가 요청을 성공적으로 수행했지만 응답으로 보낼 data가 없는 경우
  - 예를 들어, 웹문서 편집기에서 save를 누른 경우가 이에 해당됨

### 3XX

> 해당 상태코드를 살펴보기 이전에 Redirection에 대해 알아볼 필요가 있다

Eg) Redirection 동작 예시
1. client가 `/old-url`로 server에 요청
1. server가 변경된 새 URI인 `/new-url`을 Header의 Location필드에 담아 응답
1. 웹브라우저가 해당 URI로 리다이렉트한 후 server에 `/new-url`로 요청
4. server가 해당 요청에 대한 응답  
   

Redirection

- 정의: 3XX 응답의 결과에 Header의 Location 필드가 있다면 명시된 위치로 웹브라우저가 자동으로 이동하는 기능
- 종류
  - 영구 Redirection
    - 특정 리소스의 URI가 영구적으로 변경되는 경우
  - 일시 Redirection
    - 특정 리소스의 URI가 일시적으로 변경되는 경우
    - 실무에서 주로 사용하는 방식
  - 특수 Redirection  

영구 Redirection

- 301 Moved Permanently
  - 리다이렉트 시에 요청 method가 GET으로 바뀌고 요청했던 body본문이 제거될 수 있음
  - URI 변경 시에 내부적으로 전달해야 되는 data가 대부분 바뀌기 때문에 사실 실무에서 308보다는 301을 주로 사용
- 308 Permanent Redirect
  - 리다이렉트 시에 요청 method가 처음 요청과 동일하게 적용되고 요청했던 body본문 역시 유지됨

일시 Redirection

- 302 Found
  - 리다이렉트 시에 요청 method가 GET으로 바뀌고 요청했던 body본문이 제거될 수 있음
- 307 Temporary Redirect
  - 리다이렉트 시에 요청 method와 body본문 유지
- 303 See Other
  - 302와 기능이 유사
  - 리다이렉트 시에 요청 method를 GET으로 변경

